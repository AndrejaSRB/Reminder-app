{"ast":null,"code":"import _objectSpread from \"/Users/andreja/Desktop/Projekti/Reminders/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/andreja/Desktop/Projekti/Reminders/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/andreja/Desktop/Projekti/Reminders/src/components/User/UpdateInformation/UpdateInformation.js\";\nimport React, { useState } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport fire, { storage } from \"../../../config\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport UploadPicture from \"../UploadPicture/UploadPicture\";\nimport { saveUserProfileInformation, saveUserProfilePicture } from \"../../../store/actions/actions/reminders\";\nimport uniqid from \"uniqid\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Icon from \"@material-ui/core/Icon\";\nimport Paper from \"@material-ui/core/Paper\";\nimport withDashboard from \"../../../hoc/withDashboard\";\nconst useStyles = makeStyles(theme => ({\n  \"@global\": {\n    body: {\n      backgroundColor: theme.palette.common.white\n    }\n  },\n  formHolder: {\n    marginTop: 10,\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    paddingBottom: 70\n  },\n  avatar: {\n    margin: 0,\n    backgroundColor: \"#232F34\",\n    position: \"absolute\",\n    bottom: -25,\n    width: 50,\n    height: 50,\n    border: \"5px solid #F0EFE9\",\n    color: \"#F9AA33\"\n  },\n  paper: {\n    width: \"100%\",\n    marginTop: 15,\n    backgroundColor: \"#344955\",\n    color: \"#FFFFFF\",\n    position: \"relative\",\n    height: 80,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  title: {\n    marginBottom: 15\n  },\n  form: {\n    width: \"100%\",\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  additionalLink: {\n    color: \"#000000\",\n    textDecoration: \"none\",\n    cursor: \"pointer\",\n    margin: \"5px 0\",\n    display: \"block\"\n  },\n  imageHolder: {\n    textAlign: \"left\"\n  },\n  chosenFile: {\n    margin: \"20px 10px\",\n    height: 300,\n    border: \"1px solid black\",\n    textAlign: \"center\",\n    display: \"block\"\n  },\n  uploadBtn: {\n    textDecoration: \"none\",\n    width: \"70%\",\n    backgroundColor: \"#344955\",\n    color: \"#FFFFFF\",\n    textTransform: \"uppercase\",\n    fontSize: 14,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    margin: \"auto\",\n    padding: \"0\",\n    \"& > span > div\": {\n      marginRight: \"auto\"\n    }\n  },\n  buttonIcon: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: \"22px 20px\",\n    backgroundColor: \"#F9AA33\",\n    color: \"#232F34\",\n    position: \"relative\",\n    overflow: \"visible\",\n    marginRight: \"auto\",\n    \"&:after\": {\n      content: \"''\",\n      position: \"absolute\",\n      right: -18,\n      top: \"50%\",\n      width: 0,\n      height: 0,\n      borderLeft: \"12px solid #F9AA33\",\n      borderBottom: \"12px solid transparent\",\n      borderTop: \"12px solid transparent\",\n      transform: \"translate(-50%, -50%)\"\n    }\n  }\n}));\n\nconst UpdateInformation = props => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const user = useSelector(state => state.root.user);\n  const name = user ? user.displayName : \"\";\n  const phone = user ? user.phoneNumber : \"\";\n\n  const _useState = useState({\n    userName: name,\n    phone: phone\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        values = _useState2[0],\n        setValues = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        picture = _useState4[0],\n        setPicture = _useState4[1];\n\n  const _useState5 = useState(null),\n        _useState6 = _slicedToArray(_useState5, 2),\n        pictureUrl = _useState6[0],\n        setPictureUrl = _useState6[1];\n\n  const handleSubmit = e => {\n    const userName = values.userName,\n          phone = values.phone;\n    let user = fire.auth().currentUser;\n    e.preventDefault();\n\n    if (picture) {\n      if (user != null) {\n        storage.child(\"profile/\".concat(uniqid())).put(picture).then(snapshot => {\n          snapshot.ref.getDownloadURL().then(url => {\n            user.updateProfile({\n              photoURL: url,\n              displayName: userName,\n              phoneNumber: phone\n            }).then(() => {\n              dispatch(saveUserProfileInformation(user));\n            });\n          });\n          dispatch(saveUserProfilePicture(pictureUrl));\n          props.history.push(\"/user\");\n        });\n      }\n    } else {\n      user.updateProfile({\n        displayName: userName,\n        phoneNumber: phone\n      }).then(() => {\n        dispatch(saveUserProfileInformation(user));\n        props.history.push(\"/user\");\n      });\n    }\n  };\n\n  const handleChange = name => event => {\n    setValues(_objectSpread({}, values, {\n      [name]: event.target.value\n    }));\n  };\n\n  return React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, React.createElement(CssBaseline, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: classes.formHolder,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    className: classes.paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, React.createElement(Avatar, {\n    className: classes.avatar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, \"person\")), React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h5\",\n    className: classes.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, \"Personal information\")), React.createElement(\"form\", {\n    className: classes.form,\n    noValidate: true,\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    variant: \"filled\",\n    margin: \"normal\",\n    fullWidth: true,\n    id: \"email\",\n    label: \"Username\",\n    name: \"username\",\n    autoComplete: \"username\",\n    onChange: handleChange(\"userName\"),\n    type: \"text\",\n    value: values.userName,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    variant: \"filled\",\n    margin: \"normal\",\n    fullWidth: true,\n    name: \"phone\",\n    label: \"Phone\",\n    type: \"text\",\n    id: \"phone\",\n    autoComplete: \"phoneNumber\",\n    onChange: handleChange(\"phone\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }), React.createElement(UploadPicture, {\n    setPicture: setPicture,\n    setPictureUrl: setPictureUrl,\n    pictureUrl: pictureUrl,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }), React.createElement(Button, {\n    type: \"submit\",\n    variant: \"contained\",\n    className: classes.uploadBtn,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }, React.createElement(Icon, {\n    className: classes.buttonIcon,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }, \"save_alt\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }, \"Update profile\")))));\n};\n\nexport default withDashboard(UpdateInformation);","map":{"version":3,"sources":["/Users/andreja/Desktop/Projekti/Reminders/src/components/User/UpdateInformation/UpdateInformation.js"],"names":["React","useState","Button","CssBaseline","TextField","Typography","makeStyles","Container","fire","storage","useDispatch","useSelector","UploadPicture","saveUserProfileInformation","saveUserProfilePicture","uniqid","Avatar","Icon","Paper","withDashboard","useStyles","theme","body","backgroundColor","palette","common","white","formHolder","marginTop","display","flexDirection","alignItems","paddingBottom","avatar","margin","position","bottom","width","height","border","color","paper","justifyContent","title","marginBottom","form","spacing","additionalLink","textDecoration","cursor","imageHolder","textAlign","chosenFile","uploadBtn","textTransform","fontSize","padding","marginRight","buttonIcon","overflow","content","right","top","borderLeft","borderBottom","borderTop","transform","UpdateInformation","props","classes","dispatch","user","state","root","name","displayName","phone","phoneNumber","userName","values","setValues","picture","setPicture","pictureUrl","setPictureUrl","handleSubmit","e","auth","currentUser","preventDefault","child","put","then","snapshot","ref","getDownloadURL","url","updateProfile","photoURL","history","push","handleChange","event","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport fire, { storage } from \"../../../config\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport UploadPicture from \"../UploadPicture/UploadPicture\";\nimport { saveUserProfileInformation, saveUserProfilePicture } from \"../../../store/actions/actions/reminders\";\nimport uniqid from \"uniqid\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Icon from \"@material-ui/core/Icon\";\nimport Paper from \"@material-ui/core/Paper\";\nimport withDashboard from \"../../../hoc/withDashboard\";\n\nconst useStyles = makeStyles(theme => ({\n  \"@global\": {\n    body: {\n      backgroundColor: theme.palette.common.white\n    }\n  },\n  formHolder: {\n    marginTop: 10,\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    paddingBottom: 70\n  },\n  avatar: {\n    margin: 0,\n    backgroundColor: \"#232F34\",\n    position: \"absolute\",\n    bottom: -25,\n    width: 50,\n    height: 50,\n    border: \"5px solid #F0EFE9\",\n    color: \"#F9AA33\"\n  },\n  paper: {\n    width: \"100%\",\n    marginTop: 15,\n    backgroundColor: \"#344955\",\n    color: \"#FFFFFF\",\n    position: \"relative\",\n    height: 80,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  title: {\n    marginBottom: 15\n  },\n  form: {\n    width: \"100%\", // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  additionalLink: {\n    color: \"#000000\",\n    textDecoration: \"none\",\n    cursor: \"pointer\",\n    margin: \"5px 0\",\n    display: \"block\"\n  },\n  imageHolder: {\n    textAlign: \"left\"\n  },\n  chosenFile: {\n    margin: \"20px 10px\",\n    height: 300,\n    border: \"1px solid black\",\n    textAlign: \"center\",\n    display: \"block\"\n  },\n  uploadBtn: {\n    textDecoration: \"none\",\n    width: \"70%\",\n    backgroundColor: \"#344955\",\n    color: \"#FFFFFF\",\n    textTransform: \"uppercase\",\n    fontSize: 14,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    margin: \"auto\",\n    padding: \"0\",\n    \"& > span > div\": {\n      marginRight: \"auto\"\n    }\n  },\n  buttonIcon: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: \"22px 20px\",\n    backgroundColor: \"#F9AA33\",\n    color: \"#232F34\",\n    position: \"relative\",\n    overflow: \"visible\",\n    marginRight: \"auto\",\n    \"&:after\": {\n      content: \"''\",\n      position: \"absolute\",\n      right: -18,\n      top: \"50%\",\n      width: 0,\n      height: 0,\n      borderLeft: \"12px solid #F9AA33\",\n      borderBottom: \"12px solid transparent\",\n      borderTop: \"12px solid transparent\",\n      transform: \"translate(-50%, -50%)\"\n    }\n  }\n}));\n\nconst UpdateInformation = props => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const user = useSelector(state => state.root.user);\n  const name = user ? user.displayName : \"\";\n  const phone = user ? user.phoneNumber : \"\";\n  const [values, setValues] = useState({\n    userName: name,\n    phone: phone\n  });\n  const [picture, setPicture] = useState(null);\n  const [pictureUrl, setPictureUrl] = useState(null);\n\n  const handleSubmit = e => {\n    const { userName, phone } = values;\n    let user = fire.auth().currentUser;\n    e.preventDefault();\n\n    if (picture) {\n      if (user != null) {\n        storage\n          .child(`profile/${uniqid()}`)\n          .put(picture)\n          .then(snapshot => {\n            snapshot.ref.getDownloadURL().then(url => {\n              user\n                .updateProfile({\n                  photoURL: url,\n                  displayName: userName,\n                  phoneNumber: phone\n                })\n                .then(() => {\n                  dispatch(saveUserProfileInformation(user));\n                });\n            });\n            dispatch(saveUserProfilePicture(pictureUrl));\n            props.history.push(\"/user\");\n          });\n      }\n    } else {\n      user\n        .updateProfile({\n          displayName: userName,\n          phoneNumber: phone\n        })\n        .then(() => {\n          dispatch(saveUserProfileInformation(user));\n          props.history.push(\"/user\");\n        });\n    }\n  };\n\n  const handleChange = name => event => {\n    setValues({ ...values, [name]: event.target.value });\n  };\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <div className={classes.formHolder}>\n        <Paper className={classes.paper}>\n          <Avatar className={classes.avatar}>\n            <Icon>person</Icon>\n          </Avatar>\n          <Typography component=\"h1\" variant=\"h5\" className={classes.title}>\n            Personal information\n          </Typography>\n        </Paper>\n        <form className={classes.form} noValidate onSubmit={handleSubmit}>\n          <TextField\n            variant=\"filled\"\n            margin=\"normal\"\n            fullWidth\n            id=\"email\"\n            label=\"Username\"\n            name=\"username\"\n            autoComplete=\"username\"\n            onChange={handleChange(\"userName\")}\n            type=\"text\"\n            value={values.userName}\n          />\n          <TextField\n            variant=\"filled\"\n            margin=\"normal\"\n            fullWidth\n            name=\"phone\"\n            label=\"Phone\"\n            type=\"text\"\n            id=\"phone\"\n            autoComplete=\"phoneNumber\"\n            onChange={handleChange(\"phone\")}\n          />\n          <UploadPicture\n            setPicture={setPicture}\n            setPictureUrl={setPictureUrl}\n            pictureUrl={pictureUrl}\n          />\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            className={classes.uploadBtn}\n          >\n            <Icon className={classes.buttonIcon}>save_alt</Icon>\n            <div>Update profile</div>\n          </Button>\n        </form>\n      </div>\n    </Container>\n  );\n};\n\nexport default withDashboard(UpdateInformation);\n"]},"metadata":{},"sourceType":"module"}